<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"fc1fd0117cee4fd047d83d6d2b144dd71b886b1e6a2c9303f19e5ff23b4747c2506b5d4ae064d5edcc88e0947ee996af844b3ab1413dba227e1a4effdb8456b78ae8d75ce00d5a339dfa8bcaa4e2457754647c05663f0cafa66311fe813591808aac0d3c6df478c451746c1fbe1ed78e72044a885e7f81563d3e8f0d63c4802d5028156fc6ae37475930ba17d5d0c4bcda7b6d07e58a7436cc278e8bd0bdedd0ff329ad09a42b8317d160d2f1c7017c9fe585f6f07f3bcdc1fc9fdd2cd9742ef4ce82bb8dc12b4800f142b9e15278d5513f38f89d37f1cdc8028edeb2ae26e9797c70e88579260b2ed696e0ec433f629459ac5dbff9d0ee673c6abbecbf90f2f8db6b4257d7c96f58860688f8db8881e87fdf10e9bba6f0f2416cd6cee500f3dfca6287346913c5b8f52fe6e5d44c9bf29e6bcf7d64ad2567498fcecded936b6bc604fed6e0ad1853ecf8c7af3c5ad0e2443b355b7ade73d04b40c683ff883ce760113161b1498cd20244afc58edf5a581dfda3ec4c83484488e13155c1ce7d1e3ac80855c11ac62373c48d2e0b920bc64e99821b334f5150258b93b98c6aa788f098ef6b25c10eefdf4be922558184ae04b4edc4ad1ae6852f9ea163e42afb2b752a7e4df72ca399aa463ef0e86e44b74bb45edbc242316981f32d81c35dc3a4fd335cf1eb7cf62d4aef085517a2062e3c7df10d88e1fb9502b0bf6fd8e4e6cd77e851c5b366fb177b11d2d7eb9eb962aad9047095014d2e9c22173dbcb353204f8413f24a17c495606d7504bbee00d010418b9655e194d783798f29ab359478a874df3eb9c840314a8713bba071c190a3ac087b932a8788183982be09138d504af63ef1056f71c782d22e6ff349798bd05d3d5751b6a74b2a828f445e27fb709bb338520c71e729fc99d46c421116913645c1308b0c79719ed89d4c6a05fb38bd01b3b7d2bc7d97a8d8bae801932ae09e9b8e95765536bca99caba07d1892ea11ed86719f8aac059098349ec854347a2b4cd2b4b7c68fde5fc4fdd1a51b7c3e6fe1e9aca0ec154df197e0ac938c032f14ababffe1fe875b41a04009325c26b988bc5fb2e8147d8a8a13302792a508460f0c12f2f535b21cb3669065a4ed48ec2e5d8d9d0bda584097ebfaccef5ad01ee2928d9b80244bef2040b232cf462d35c076ffa770504f46c11838428fc40f31439db39934ea20bd9fb445254a015e9ede6645bc63793b0fc1605b3bc4516986b5abcf9d38a3b1176eb814c5040102673f61d48140864def039b79447de23489f0793d057aed0a321f6e20e75375dbda1373fdf37c2fe8cb169f6e40e923494a9d78570d7786c4a53155c2c21d732eb355fb23e5c6854ad0ba0ce9ccb68e99fd1bfdf3d0237dac0bf95cba821583e91de2e460fb4d9e8dc97038aad7b5f546ef0eb27b43ab8301ca9cf6a17851d384980c3453ffdeca80603b0a33e2519bc0544fc9f2d108844321e400e5f4448e446699bdc3590ebaa40aa16b12d9ea4aa03b97ee90e94a65fc96cf7766a02ebcf1a93fdc4a31786a3ee35206ff7ec83e6fabc1c883bccfaeaf23403308233f07599b62ee08e41f729ad2434e82feb355fd68fdedeaa720d93cb2c192def5ead232e77e4643e1fac8864d064d11c60a549a22aa5838b8b595fb8ffa9c32876a9dfa102147f5fda1fbb42f39fea21b465ab0608f11a047190ea98d8fd8907531f9a752df8b7cf2868a8687bd64393698d017783143fa36902492dba2a683081b82c95b6a322d9e108eb9effccd0df6127bd2e6b788fe41e31561ccd68fb6efedca8401e96abd8c440a73bcd00e4a78e622db068e66911102cd1db83698b69203b2a112de8f03c927896f5d327b5faf27cac387155d70ee9e76bfc5621d136784ee56954002d60af99e72b7d3ee41a300467789fe7861f90aac7e549fa06d40deff945e3668755e9a3584faab0ca7662f0a4bac612fefa5b5e31bcc0ae9d5bcbd91004b5c1c55812eb03212e92e4b38dfe08a7008797fb88645a52af4e05fd5359732c6a675d2e702be5660f14f14e2f03b6c3325dc2eac24ac44649456f6e0ebf34a66f4c3345c3b447b78beada69296c0511f1c8dcfcae9c3bea349de5cdce6d54093c9b9e3cbe5e26a58fde2f4badb81fc4916e93f1931d3d425f1dffe4b8a665745d80a1aa2b06c6d96f2a831aa9bda14d89d834ec5a5668957328a911ede45fc76d80f6e5db2a7af6e88ed441599efc7665252574d1df1f86d1ca72dff4d395301f52aa4c7801f50363d51caf6a9684f5e22b055b7c8f1575abefbcf3c664e45e9bfdd957d8b949fa542f2bf174e753f8646d67684a11e953a168d887a5377af219f6ef54169fcebd1d130f76015b60aa058f4165e8955f46d2a29c232eff7126d8ba343228c9b483f8b3a4fdc1641f1804d9fc10420313ed72e6aceb311eb0da9a419895fe7a536d1341a8740d806e5ff65b61fa29b5b0f3bc6027aab6e5839fbb174a4a409ab69f97db8936fe756dae8d38b08963fe4d38356d37f0ac016bc98e406ccb01446f7c8369e1855c113af089f213a94d10bf90fcde954661014ee9395a610078b3ea1abd82dd433207e1f2fc2cc5c6e480a74e6d929e0c1047f5b1355c46ac9f473c7e4cbdb7aba196bd2831ab0f5a9408be6da273dd2404c00e5f1fc3db188a7832247f774f3e255480e7b64a06ea18f7d7260bc0f9944c29b183c3e34230baf701dec40d7d14ab12dd2c33ae64948e22cd7213953716ed1ca1cc5eb1c1b753647be3c49783c7988c467bfe7e2239d74b78faf09d5cd7e07c75372ecc138177b0028aae4a1f4af76d5647a9a9e6ce487a8a1960be060d37897bbe9c69c356db41813af11505f7d76d38b7c4222b6a96f3b763499da30303f6ef21022ebebf396c6352745f1aebc10bba49b455247d41ef497963f8d99a71fd1ac93a2253cc931f847d65a54cf15b200c548c077678de129e76cfa02d10e41381907e23919690e845734c1dea59a978eed4a8ded2b6af76ce1b16b092261ca3e85f1a0fa22dc1a574c332dd2c42385ce8be813560452a3e46750b46c83d99a02af45031afb528e3e0120c2fc5b7522aaf24edabb47e74c433cd48ffad3bef57f76af2245e70da2076029240b07f028797e5cc1c956ab2cf2d3992411df82927270111825139ce79ca96df4bae680b32e4073374f7a9dc23b6d4814a435500d748f2f43cb0842a1db06f9a55c561d2758cadd366ce4affbccd9e981f9ecc343b58d8edd585cb8e9337d62fe946d9f8b7b11b141c1d8eeac39d634a25f560af47c728eefb815bd1a2875a1fabb257b1399fc70756c4f78b92e94a75d045b7fa90d625f0d6c051ab1adf5e4cce97767f1bcd4447cefee37c3273190c7e3423853c398139500abe8d200fe5e4b95eeca9b7c72a453633801b3f1459f7177db99b47575e06990f032dbd07b6204224cf66e7e4353cb2949db717af10363a2843e022e0e305df88ef09602065a7924c22fa1f04f36d90a3275a652d44b66b450d31c3736036cce3657448fd3cd7d11d3dcc23fc4cdb26f31f5ad125d65f5e108b3ef8457b8d8eeee38f11409b024607330455df6fb2907fa2e2dd17810cf5aa3e3ff2035e010df15179ad1b65a93951e7f3c00cb1b620adf4392810603741d070a83f1cb675e1958d142d14ca31730f20333b75f2a1129134f8af79a148954692e148e82865792577fc935b341a80dfcfc91346abb662ddc235dc6aed4f0a11f3116c1110d29670ddf87bbc642e9491e99eea0b6390a30abaf898159930b29b1f1333b57882ac4a4b039177ce322ebba2bbd13981e0c16c3e28e92b312b34beb40831c0ab6282a739d04108aeaaef9f5535811d09c55bc423172651078e00821a1d1e73ed60f602698a5e40647cc8bb45c1309f32f203f4f291e0d5b999f7e3e1d8c6a4bb152a9f9b89871407f9fb4ce1b6f64d33235ca2926d9370522ca07d5b443307de76e9dbb966f4041eb37a0188cfd10b493458a089d9e11a0796370cedaa6a3ac1df74b8e8cf57556a28db69360aeaafca876cdabe2a99c7de7439743e1346829aee83a8e4926632805f348e78b9f3cc423d421862215f6b74bd41349e46f0e7cd755a016ec6ebeac3468f3a5ebd3a643a4a9c3d684c5273d19e9a37131d80169b99fabf9dc1e32a99607e1bb8f7b34a8ff25bd93de8ff92002fce3eef655179d53ab09aaa66f66d35c2011cfac07273ef027d65a5f7d5e31d1f552badd27e8d94e2c0e2f1667b5a45f9ce3cbd4ce8685d5a2183804cb62480fc8ac3f1b1cd4ab23e4f77cbeb1854761ab0b54bd4ce3336381a32c3eca56052b61d88200842cec714f669fd5be008792dd366c4d1c33d390abe557945e5542ed8491ab1eaad193ad951f8ef9f818979687f61a5d19957c4d4d820d71080709c00a04510abec5008435349a8b0f11f367fc9688bdf38fc5ce128d66f6f0e0abd86371d67ffec9382b06357a2b3096ea2d4395b8e24ae8a91071550256dd89e3d33ce48c47a77586ebe152108a6b988dd5084946c8a0f89852928eaaad17905abb68e234cabb3362f1d545e446d8916ff728c03544d9b91b32e6bdfb1a8cb3b165798ef6c59fc6ff9d06caa2131f6e944698b8e9242c8e3ebe0289189c68df5639dca66c92496232b34768f9efca6e3b6c88ce9d0255832dd8bfa6a7e55ecb9f6f861f34390f436f12c4da2715d1b05f34167209e2b83343a0585515cb99edcbabef523cec896e2612395b1b6e4390883cb502da9a1eea5244cb86071d3b29b4685149c2c52c3d6f98d2b6dfb57a14394d5710f012e85e0b7019b10527a688e725b37fb9a9c69b524b3c0d9ecb9db180885b0890b6c73b31bdc67a1aea639840f05ba4b3874a2e86a5f34c1723854fdc6f0fa75ec937b00f31a6e2655d5374d30091bcdfab6fd4b77029f88f2be6966c4d85035eb26e38ee3b8813a05fe313387da12761fed01210cec252d55253c68af8e51b71588be0e5053c0327d37ae6beec3b36d3848574e9d94a26f9c880ff0828af516444422088b456e25f25d66bb9d3bb297df1cc2c092d69d715b2b4eadb4bc9ddc731f418eff9a87f415621b18ac4e0f0bc717135afe2613a1544a5d6bf57a44e087bc5161e444b57ddf2bdc1c270a3e800fbee281082bd111d867dd32950898b37e255494545805d8404d372ec9ed11b10df88a530e53db8dfcf146151a6750b2177ff0f20129d7ed19b368389d2745d3edb3f94bbf49a29b6b9aa284195344bbc46a6fd5bdbf8b197c8d93142af472f27c86dcb5b6962480e1fd2d1e3df428be872bfaa013421e95101f855f0cb95f8d2780e501ee74f38a410ec74b55af1f2f03699fc853d3597d23ab4954b08353ddef15132dea5cfd36242bc95e9fd600832270242d7bfd5140f646a6d8848fed0d43763cb6cd5092f89cc771f90f596126fae540d63d4f3b56b9b8c7d92d7792df6a30c528a3f58061a3233bb511dd9105b94f397de69fced6dd19d4a1439329759795b3ce7e726a77c8b88fb1579fa017dffecba85b7c0e013090c8154fc63593a53dd69923660bd811b2180869f539cdf1506ee385382a8dbeead7ef8272c123bc217c406bebba0efe435e4c10792fe884d7aae47781562574035781dfbd2154803b800fc07d22b052ee994f92c03a79d3677860767515f1fd7419dce51bc01d81ae9c107e3428268ef4ee07cb43fdb2e586763a07d266ab0788eb47a6dba3b9232daf0213696463ed550ede2ce0f16ea51f674c852cdd8ccce49a63f818d33a12e541158ea193fe9191a0204d3d2c756ed5ad0105b2c6c4033f11f3a320bbd017b625e839944cafcd6aa707762fad66a189d60f0e04a6819d387b6a682c4bb58c29f2f6996a5386749f73c8a9aa22449e1e904c0f563516478801777a7bcfc64a2699552deb406babbdfeeb2071be82672c657a1bbf1dea61c15fe4d4c885f1ceb637fba218d54e122b7fb5a84e4434202dc90dcee3fed82570173674717d0064077111f3debe6cfcd62208d53c1207bb889b3f405714bf6d77b4d97751cac837f9711d75e2c89423fcfe3f202af6748079ed704551a6cb6601537b85e39710c8e68408470a570f01f5e2acf0e85fc297cbadd5b287e8bcc8d77b758ee0dfb5b3c4a69731378e41dff7a78be524b917aaa1949c05ff5efe418d5c09e2a149090690551698e1883c01b9076f12888008a33cae6046979aff5010a79ed12e7f72bee3749bba2ed724f7625696349d8538af54d2cfec3df04803dae910ec089591443a6eb08e35f838db642a478ddb25d84ed60b04c15649e24ff178622162d919887cc58dbef2c36d58bdd609129d43ad6f5821694d04e7e797c08d0914e4cd7261deda00c48625960d2c60bcd9cb11cb2354b717cdeb8ddbbca31d468e09af47aaf37c0b14f28970dbe35cc1304cdcfc6be006aac7b7b553c436a65e06e52e4263ef00188a9b02054421a54beb3c25299a230c99ec3a3aac380db9685712dc9f07af0385a05ebd7695bbbe60f6eef0ac7028566a6ead83dbade80c6f38ce5dcfc83149a5d60112e1e283a3546deeb651e553207863ef6b5c3b6d70c66d51429634516d42c50791be487eb268ddf974b0ac8e91c4351b24fa18c1cb83d442c7829fc835cab16645d076b0558585630b6f0b97486e04195c99ac114660b1956d30c3fa4bdcec6a44b1e8d2cc2f1611dae5cb36df0adbdf7e362264e5192208c52783251ac0e7e633ee9c57c2b4e69483daa69021d76039ce7ab0b3daf95620845b76977214c5c82149d746ac385e730eb729c583c4ddd7243a0aae5b232c85e8963182667cdd814ec571404b5029196fbb703fc2ec63aa667dc8b940b6f7fac561d2debbd19d1fc3151080d21c53b5fe86ad9e1aa274111b8d336e23aaabe63533ca6f66acfcca926c3433d452ef23465874f5a482c7c3a4f9e85f3f93cc388021de58f5bb84810e41e858cc69611625ad2abc8fbdbe23aa0935ac5c627eadd8cab23625aae375e1b31806374ad9a4b8bce8e57e8af7b27a8d904409429665e19ec2ef1970e4b15438d2973aa3b53592bb2df375b311c959f8494fd0a1033966d296fa5f59d17f1704af57746819e5ca305a93fcbbcc32aabb65480055cf30a6f13647395d5b97b0751f5fe4d056fb1e482b8a587a0268a1672a8391524bedf3bca6743d3f294a3c197da467b1a00012f8d348c0c2b1b894c879936fff1118c1813253aa58595879e22dc95968aedb0a1253f314489b01d7451b41fd28e346b52488773ff256eda5f1c84434ccd9fe8ecf5edd6e9d25becb49e081de965b87dcdd328ec8e226df8cce5a5699245a7bd7dd11926d1d1579c237578b44254e7d3bc0a07a0b15c92817317b9902831ae3bf7606ca9fa7d60c48dcb181e747c416e8b3d0943a361b29827cf0a0ed09ed4ed16221a3dad536fee2826013525a9317be384623894830882f5d47e658dd74bd867711167aee46a8702ef7f52335bf30f19d223ba356409355266e938ff0531d409be836806ed46de4d3a06b444fdeefd4824aed470a002ca535f8a723e6f3b118e250f1691ce9bdc27657aa0b6a8df2f8d84b23e7f02f200e526b20b37d2f32a3bfb2f5b5349e78a5ea409dae42b04ea86ac5ccf1e97d2a391f865f99df397277e56b3e1e7729b31741a1034f794b615cdb6fd07ee1f8f33d95e7917c333bf8d9bf96101142096fe527c12bd5eb7ab2e2657e1331bac8750dd2991e2a283c0d45506f35a127a8441e75a51b215053e2fe5c5155fca0ea07554718f3ebd6038e902cf749da7ebf0152311400bcf854f319b1c09638e7ed60128498db71313c0e44435a5df230d6bf4e737b701830470348a5520fdd01332947faa07085b7eba70c464f81a18aa960eca0654d2e401d8706ea6c8d370c6bc1028559650c50d99db32b4517d9d61c3f49f91d746729bc0beb4f7c1d05da5616d112e81c1b351e1cc2ced41d8c359b1f3490472e00605d647d1a4dab709d2c3480ae1e3da5b72138a2aafb73bc401c9e98b493e793a2582ff9797c77d72ff4ead19a3099c26a77bd7034d2b0b6bfc339a741e66dedd0fea8c78e61b19f8f680cb47802625531d9867ba6346222a7cf3d92e8907c4fb29676c821e5079cd7fbc05e731c234b5c1bca5c3923f696c974f32dccf6fc3d6fed60cf1f9e1aa9a07f22b84e0dba61c39a5fec658c26b4260fe7025adf324df68e4d2cbd039c2ebffec164ec9eda22c80fe86cb11cd196d94d57949ff42c1077f284e149f68c1daa8c2cce026070d95a000a2e53666b48bdb6096dd5d01b4fa68f88aa1f7bf7ad31f9a438fe70357e3e3ea9a4ddf898142ec762465cb76a413c93b22ba79b7da605848385c40bb427697414c1bd413f0bc86d298d6d8e6ac8a85f45b9e74d4db86f3fddc29cc86165e2a1c189a01edce0681081d81532d8f4ea655b27ad4845e92e3a477eabd0b6cdeddd048ee5267a32385a2bcaa7e0efab144fe5082e3ab5fa635a187f9ad5fce8d6b11b6493a94f509de587cb2437c381c187c47d5feea7d6264871d0671523ab6b2d16d1c8020ce486887bc91145c68169558d9f89f6bae54f0012d5b86a99e1fdc95fd31b6eaef6b97f72ce6277d34818fc4c956e268eb6bed37a6879fbef2ab1ac7871a6693782568fab6af0309dd1ade30791a94f4928d1007c6650c42a7cc0037d7748b6c937f104937055f9a4966f970e6078c9a9f157bc7e3d34c9888458b821286cc2d09cc91175eb39bf249c4d8ca730423e3abdb0e30d3559036fbddbfb7771c6f54d3060863c8cb6a0a8c80183d632fe700fef66a164151bbf015ca09c28c22f9dd6913f028cf4454c52b0927b25e2b2a351560f5ba86d1c30cd16e2e8208eea153f7de085a483dbf84e50d3a8a9d8cb8acc6e4042c7fa31f9e6b137715f042447a524b436bb6720155db0e2cc9f64fdc341c3816fc6b86928630c464b8151fc94a25310088b96559f1ebf6876fc260a0e7b1d458ded2aff195125d80f8ab00a08a7a2284132f0a4e70eb7184757ccdf1359e538f430c910f06590f7230cc1d51489e4477983b41aa6f400df6f47134572dc82082e3d5be839e77b68451084e97bd87a960e118540d67e705ff103516deb8dbb5bff24aa336e9ec4495353d88940e1b6b3b94dc4c0ab497e964b7e608623d5b918479b91924b13db6520132028e9f4d306bb79963fb880ee8086fa4702dfc6a4a7e746c70ca517d4af1adc064cbae469846c62be3a21064feee47418cb12182bf2c30f2b0bea3e40ad2e86ef3cd3854d7b0b86a056e37e231740a703e929ee200a7e60be5f3c89260f28e494984e1983efea941cc8812c17b49ccebac528583fb16681f26647f05d5a717b7f9c1e5cdd8cf14c8f74c35ff3d0f1a8cded6e5b042c6f8185a53a8dc8be64b2be63bb1fbd34872e3acf8519288c9fe088534af35731bf7a6810ec50d649b30ae430701274c7a4c5cffce97920445391c9e9ce0cdaea0c2e592efa1e9e80825c1eff967904d0d604c20bf5d1dc865e35db72b1020b7061bb68ebca628eba45e3eeb8d470312fc32060ee4a9058f91922c7ee96fbef34108c42adf014595f0226ca6ca8ddc11d9416910552d6eca10b7cc60bbaf903ffe5d3b4dc5e6b4c2663df9b526e27cada786a29a9312418d3389cf7965a4316b9c9272e385eed5aed74ff00ec9eb5b1a3f51a1fca2d0b9eafba7656da00f24001a2105462ed0c4d8ef722c212540111d1b971ebf013ef9bec6a9a84c93ccf573f5b251140eb146bbb47f194d9eb1cd0eb65413d2f9704b22722934e52924acf4a76f6c3009ffa6ed591fd48e15640d7e972ba8eb53281838617d4365a11976627c35ed3c973d00ffc8aac13a02a7439b275451345b87e3a50cb86a7832abae991a86798de12f834956254a0778382f79760aac9a1abdcec18d1c5bbe8c559582762046d2217eec9ccdc55596e9af0eee3e35f3840b59d8ee09114dab416f473e66c96ca87a15ab56291e63f07b8e43cb9bf7856eae7bbbab5d109800b0ccce8a6af6363283d4786afeabe9be189b462e5e5c01bc4f4975445dc78c1b07b0f8fae82b517a88e76a67c1bda3aaadc1395a4d591d58361657d8be001890a9b076ecb7eb05ee9f04fc88fa2a3bc4ab13cb644b1d8e8a8c787e15b9a84029355e382630c4f3a6edfb439e6cb4cdacff6b8a0507107b6bc25982c8bb84bbd54e54fb1d10014d71dabdfba28e6b74bca142706d01b5c747e789773d85539d47a47ee52090986f4dd9f8a4108941a3ccb7c702904596e7f4fd6e60c1f2b54c2a45b79b64bc818022112b9a120d912d103e2874852952f842136d044864f6d10be9a471b0f9246fd5112fb76368e642f475101b3ed8cf9cf90254d2baec9ac6f39ce213ee52b95cf7c6eb8f7f67e7b6c13d3bd1203d8b1924e45c727a8d14c7559c82c44ab07115f80e18efad61adb557569a4cba57efa84b25bd74fc87b8b0fd3404633ceac93d4877a5683f6e452b1495b3b2839a02d10fe9fd2d1a24aed02c5e956867005a22803c74603488876a97e5391a0a37114a4f177975222a1fd88dca3345c4027fca1a36487902621a01913f1a7f3f77692eae66d9b56b989d127af31a34cf3a0afd8c9ef6c06709c4b21191e80473819f9796200d8e2ef2833267e7199166dbeda61c38a969eaa80d5c05de794d1e9402f7324deaa605fce09baa36a9d262c550fbb2ca8385d36de81eb795ab3706a1f9696bf089d09677ab04fe87209097fc6e88e9a80b2435ce2702822e8c1df3321a4bff1a271785b524f22656260918684cb33502773639d41fbde61ed616be262d80b379a1c49f8489614694b49593142b31a6eabf51f23ca736a75fe02a6de6731f29d231393fa8aa4b943d489bfb88423ebc55e5d5b4791e52459c4805594ce13fc24b45d8e7e1a7c1e5782439c061939f6c3911e8cdb69675dbfe0649940a10587641a20421b164a17a0fde1548c6d3caeee601348d384cf82c0c166acd5ddabf9ff32d6d901e8642d41075f11e4ec3d5f05bd182e80aaf23be29cc73bbf3ceb468190376e6743eb8429aac897702e5f59d77363255a8e19b2409fe13d97df547db4892990b970c87e625b3b70dcd75ae829b8f9a59fbd9b1d4da55c2076aa1e71cb51705a582e717b858fe231418e173d9f76049cb66018aa4336e697d9b35fca7d6b4e997be73952b6b4708195c1412d059eb0a4b09bc9be3c9299504b35ee1ab2e085ba5799201336382852100b0d2c6eb8f2cc0c8174ec9e0c539756ff2277260ed65a37b5f455a96f016a9c3c7a9de7106884b5634e843bd6e25c413954e95f5a731d2866de8fe470d8af53fadf78fb9c4fcd69a7b96bffbff361f3279e5a0cc89d2b62aa52a2d765bdf55c7deffb83a68603486340750b004ee83c214a593c4bee04040b6bd3309b9d04abe74e1c2069c267eb9ab3f95dc28c97dccfed8e13379d31eaa4751a151fb53f47cf8a1b61a0ac311a73aa0be0c8b7d7f6d50bc5da49974122c99722b5ca493de7b92fc2d76f8cab7f9a5763b2be863b2c761bf95e1345d829f3f5e6eb623fbaa6687cf54b8d64930a10d486951b726beeb877b9a60779fde529bba658c25434062e6d9795503243397ffae7e3d95164ce44bd61d1cf3e6fdda0f51f4425962dd111305d5f6c033653d7a2ec1f3125ed901db8aa32676397364c8fa62e4c3987cddf977efffe88ebf0e5188bc8eb3673b55d34ac5474926c7619cc7b476ef91eaa5f5bedb0df3a261366a68a73349f1f193f80db18f3831f1ccd4d93ce5054ac4515f9ca4e63b1d3b3070efb9a820ca74630d172ced57a55f18e959102578622883f44863d2c285a973ac4811233495afcf9cc0745dff3aa94c04436f68cd850657ee45f1dc2186b03c0f5f413b3b214fe1ad553f2bdb7a3cdb36cfc85c557e914f884305e6b6489f2c11a7babb1ade29f413765d22ca3d94e02b5b629a970b014b9b51f6e82d7a7bb99c0fe23c84b28627acc7ee9bbec8040828952d7e0e746f1b3025aaaea0435b913501eaf343be4e9e660bc1ea19128ca126720618f7ee06994b093086b644993ac701b7969076990932b884bbd66b80a7c17eeda022cdcfec47f3d7ac19f98bf606ad5c702c33ecb65aa246b76bf2b8310ea0681fa9c9db237f9052f28ecaa6e26b6da6b2b8cafff7d60ba19a65cd454b18d96fb383056eda37ddba6dfcfe9dec1c1684b72e421f3e0d34aa17b04a87899fd0a35da277e72ebffa45fe356af49614c1e345b6baa413580d13817b4a055ea40b6d64c2d5e3fd1d2a3896624639c9c6eb550c6e6617a2b0c07fac3186ed602ed7478409ec4fd1d6957240a7b2ae46567c53616313f0678156597f6dbffb872d7b408cd79211761e5d2602314dc184144fa63d67072d9606a0f55d88f9e63dc2bfb44ff0a14674420a888056185f1662e73a44cd313a23c81bdcafe8dcfffd9986ec425f078987925b75873250ad2757175320ceae97b8a43c033b331dcc4d82fae5d2d26b6f47580f0b2f578fe6490111a5018c51ec68519e5b0be4ab5b1675ddc8cf46a0e1a27f07045769ea314420b26cbf0a6a605c82910bea51ac925cb3bcbfefe9d14e92adebe6e34a4b9c2775512519c12d851c84bc1014452fcff1199c896a5c508daff540a1f252367c4974aa67fd991c247d125fb56efbc11153ed0711406b6e950b3cbb0664542afdbe99c1eb5010fb0a02373fa5b5fb2cc894b9c94acc5d68b386c940bc82587e5a680c0bfc4e89cb3832d5b5cb184edbce2db95ce2fab3291767c660248859b0def84af805afcbf54767ca92709f1e09e39a0031f3b3c16b54625cfb70850627052109c4a9efe211c85d43336b2603886aeb3f687296f1baccf627f74f0d45957a21cc2d99cf2f25fb80300ea36780e5476c1c4719d2fef849c08a126ad0de1291089e06eec0c2d5641598427b1098bcb651da6aec0d02cd4dd0dc465e6b026011369c094030cb9cfe3a9e7b6170d49edf12801efa6067d832ed1700f50af1445804b500fc610c2a58d5c61d0cd883dbf0c9e4a41abe83562c02f09c9b8d00bc2442d9a41d24f25f2eea90cf23f118949c2733a0f5dccba67bc307504fb06979ebb7f72d873d59711e88d2a90edea6aaaec74de2bc65abc359aa9678097be2448625a620c7bdb2fb1dd07978a5d6b533314533931d24beaccdf0dfdb12640258710419acb17bb0e59b1f71f9d3bb6fb6199c57e1fdb3997241255b39923aa7c7fae86b9282f91e6289b70c956e65ddb542138452e0c64bc146a1378e88d719deecf07e12a2af5efb56522d92a90acd21ff0ec3028409c06f74011722463d1f43b766148eb39082e1774e65c23891dd09662c73c394373ff89012dd9aae8f07431c0ad4c86b37c9ad04846a92f217d36e10e7ca8e1fe304a9b96ff6544c2ddcf5542d647f905ec2a42684988735d86124e76f22f1630c3aea43dcc97c382917b9bde81ee19516294b2aaad5faad9b6dea2d01bfeb3d6529bfbd810efd06d38e5f3f0df0d8b23d7972f27042c2fe41fb918ffd361aa74a1ba226b8bca3e9c8ea8eb53ebcf6124bf4546fcf289c855ac7d140a305e4939a849fa17570d85bdab9d94dd56238c5edc5aed8beceecc7951ee4b07df7000ff6e8acb5ba7b280ddc5d483b5eec5e4390719bc7eedc5bf9ff95f8c8e7e6b2f7ac9fb4378634c95b2f89aa744c071716af1d9568a875a968fb3dff6ae9b15f6001ad2869cff9ed004138257c2d76900ff1543c5e7bdcad1f865a0a6f2db08e9308ac2f437db9d9bedadd1778811a3e2e9b4183e5e9ab6ffe9cdcb7e6501c1dc444d67d8f422bde6b6f92845f8af0dce5d35d17aca2d30750a8a33826fe4c1eaf038b057978824c31d4a17486e06b1b389dbeaf43932db85c8dfc3360bbfc38fc73b87f8bc8788b79d72256bffde4610197f21c164fb6c9139d88d56d03ced8f812b8fcca707a84dfeafbf5a60651049a2a435a287fe496da336fc52b2f4be967a02f29f13952b1d9d650285dbcb6428ba583a9d7e9b94c75a8179dd86b14699483ad864071b59dd2b9f636e6f6b25d35e2c1c511cfa29d0ddea4ea5dc0aea58f0300369d6a04243c88a104bb6e4572a3af40786618ca8fe7287dd0c0e215bc6e3ceefa7e2514580dc0e9bd0ceafe4990a4b6be6891ebda177e0ebb74593b7e487a85faa7c361952656854521b472b5e977b6be7e1438e1bb8453e86554fe9f804123d988529030b07b987c455d2e7187367ce371d5cc8fb7f0484bb79fd2e1516b0a4ee3f55f84d8376be654485813427ca44c090a14f71e66600ae21698c6493763ebf0c447af91429654bf27aa0e7e17cd709312315e89c90d1729d17ac4ee4267f787ef081f0a5922ce0ae640f871d64f9772ed1170d4a71d5d1bd694bf88c24fccce6f73910aa98c824e2ba16d98a5b5e19a85a29c4faffba76efd37fbd69420a21810e83010ac333aa410f962479b004593fab581e8d51b04739e1806f26bbbbf629cd0f0fa653434732c0be3a46fb64be6d85fd90e9c362bc78b05d499e54eac0c1ac886bfb9e93160bd86f1921e4ce4348da87484d15fae5fa67766bf40088ae18912fb2c5eeeaad81766b7a954027ee3c2b3560009a542df4556d64a545562712510d97ff914d16dec021276b721f512bebcc1010ba1204d0fbfd04574fe45eccaa5263dcbb76fa6f6d8d092abaea7e4060f227c6d00a869e10f438108b82730112df2564a64337556d2e8d71602fcd77ccec05a10f12dce16dae660c1a5ebf5431e63920ae00c752d387578e3815777e77b930fb5d8a819be63e4e664aa14184267e0860e4c0c99cf8a1eff8bc5c0ddc86ca6fa23d62307e6b08d07288367d204432331ace5cea66b143fdbb3c396a66fe0908c302a87b18a1ec9c956f4610843b9ed51bcc80e019f0002b5994a9900691a361e3aa340bdc0e1ea50456016ca8e69e620ade78acb97d3945f8a8a7bc078096796ba2697f64e14daf4cfa9e9f4d21c32a314ea311a950bfc39e62824d75497e3ddf6358d23058263590baac2ddf0fa9d76b4d88a6a4e39743d52dfd9d956be326bafccfa8bf314a896b15825f41189710f0a118173f6b5d3edc92f637f8f321e97f5a0fdd5b4640e77f108da6c1f26aa58fce9aac461fed335f19c9401b39917e8471760b0c63086cac06c99a0bac2e5a33458ecc231319a012d85f6803a1211cad8e3d647ccf2a3d59fd7fb92dd96454cb835a0ffe84c5d9630893c7f9462caa8d7b9493cd44907d3af638df36970a9120bec5ec940db741927c7c62aed6672d779eba8fd0617acf988077b8b25e0f51821bd7a683c149c262c9321c0de5b9579cdf5a9183bba34dd4991315639bf1202ddb3aed7718b3c5392644bcd61f12561946fb9ad5c1f6b162e5fc2d10dc041478504fc35b22c57a4b87dfc8b3b33845bc9e36352af5e21f3e6bb91e8a3fdc7243eb6a6487d9456da5cf4f4fc878c940582c86b53765ec73d0379dd7ba961f99dc3691c7390501e603fc75adfba7342855ab4995bf5244f47951473c3b91299c70cd7f4ec2e7fba7db9c43bd55a178e7c2264357c42b18f9880c8677ff47af2ece9ef8349be2e8dc30f8bd027c1019771fd5f7d8d79a268b0cf445f66de9838c474d8c900817008a1e38107aae3916ced51e7509f6501688b5da83964734e29bb550d33e447ddaa730ab8a3487c2e88c1489a7e4a4c4362bdf15480cb790a2181f0fcbd73fc6446030c37d0058244acff5599caeb9c512cdee723f34f32843e065500da306f4e3416359a4a3e1978e88d9168d428edcc70e4e19783f97781642ed175a9f52fcb493032d503486127225ebda524e80608ee9d66e13257aed1988345e70bafe42230046a8bd4abced67993aeed075fac9d9e54aa8458482582a7cdd096015f138367f784ab5c35ea7f8fca4ea801a72a7b82f9e6eeb783df0f35b801c8b646c59c8e4139b9b414f7486dc7e4648fc5b3f5fd6e48ca871c273ae67e10de9b1eb20d78ea82c25aac0345b96c06e2d435eeb129adfbe611d18d14ce7ecbe4501b83270b7d6fbaa2eb63cb7ac8a74733cc6132780ee2cf5c91c9294b030c932c1597523bf71e1b91bb5bdd97ef773334a7b5e7dfe6e2d247acfba24d8fb6ae81c5cd71af9a8ab1bbcdf3e4dff85506961cdc203d77aacb891684e88f1f9ac76d5d90fa57dbabe4ea61d4deb1644a35e777894ac4253cbc894673eba05ca761619d01b2729dfb45c17dae7c0f9bf0879c0eefb127c0b6e111551d3b2c1b3d30086bb0a5a961d1a058da29326b0c2414c406e5f2e1c320e2f6ad1913655c2c82b4433ac0934915ab757095aa0cb5cabd85879c1a5701ab87554b080af38ec910ddba370589f6ed8ec9771b0680a64522692b6c610463e09f32754364c6a85b2f56a1f3152507d847335df3d868d51eff4e75984d711c4747fc0883a9f2cc6118eab400c5a9fbc3307f6582226fafe96e3a81d18ec00cabab0c649bfc576e9cceaa3b04ee297d67ed9281b2edb0107351f4444f5625b8b61ea91b53662aef09ae291b9fee4e232d401d53f06a79f6f119762d46c44b341b9345036471aa35f16b19d7c09d9c0d50743da44cf2a5e07646fbb6f404a2e1cb43bc8cade7b2edc00ae69a8356e437bb2b706882411d1949d42b9e99c1b7045e5906f55f58fad1a90ae0ecd2eec22fd6ed299fee3cc3677b0b9a9c79d5e21ba549ecbc6a88de04e5dda4c3d8e3ed5c88f98ab06bd1e7db8d328c491eb6a011e8484cf5bd4273e5519f9d3087b1aaaf4508158cdc11f8bec3cc630335877ea54d2034277263c8ed5c6b3104f72eeaae904d2e0eeb6f355403d0fcecebac6ec535d87b43a66000491937aa2a30baa6277be8c4dda1fab4e7a57052644d05e901aa1a2947052b1307a6e0638f7102f0f537523497765d942ef3c9b0ab8d380e5f16d53cb3b0582eaa2c32d5324ed0ef3fe11bd68af49e880b797d51ea9811243b490c2089dfbf4b87eb025a9cc6ca0f40a3417811c80c2a601b623a0c633ba0fafa4729c4a3673f89de108b4b041f24d0d2d679664b1e72e316ca310a3e7a67e67c29ffebf10195512250e2e7916b9387334153f86858c54f20596bc852a6b34a0293e93a0f0d19829d6cf56342bee0cfdb669dada0af531f2c13b9cc346ede4b0e89c953744b5610c7175c4e33d9573e3c8c31bf08716cae503967cf874b30f920dbcf7966647fb96ec6c528652d9957e4f13df2b1abf4ad572da88769761681561652e51c0b509ae017c49918d3efee6ee42a86db24d369021841af9b288c051bda395c2bc2662e9457518ae4190fa845af97aad3e3b8a076d6f181667692f23aa4cc043330095e9d703c6cf8549007cb30466e358be05f00af9131628d4ef5907b6cfa329e6fc9a82ba983eeee57811122e7fce4f572d2657d519ed79ff18f274565f17129a01f7b8a0eb930e8497cb7189b42989c7a982c673fbe7ec5f3eadddf99b30382d74148fc8da9f2f6bb09e4d6cf58fe475ac851b17a396e1051fb3d3a72201f32c500533f3ecbeb3e2ddc57b6a4acd34887e6459cd224fa23498e1130b227a8ef6839a3db8c90c852cfaa8a403131cbf203997151dd88026d5b3c1ebb5e0579334e8d9b02411fcb3b65364411b56d12b811b918fcdee43dc66323916099dbf16ba00238f8a0ce0a363de220d78c9a377f14abd3af1684bb38bfa4cd37dcdbda5de602dc0482e62955c254c82257f8f30da85f6d4bc7fed3f5c37072e3826112447a287b463a09b85d799f3ad34e87e307990bc5be3c9c9594e72a631731770b5d5cb52e6dc5119f31ff8a644cf33fd4b27d735cc91352b08f23f875b618a0a095cf080a008b7781d225b65ed31a0a390ebedda380a2c7ae033dabdfd95c10103181d9b657f917dd9d71b3ee97361848a65d5cc65b263f0c8b9dbec743bd32a983f79fdcc8fe8101260e41ccf3e753094f2ffa1fc2070a34e372634994a4414535b6d02cb90db5f2c2d779b84a4207b2a8c2eb25fbe17520db2cf311c9a18e178f176d349b80c9cc58d903d288fcbb01af5f8afa3205fa77bb651f21a5527b7375ad3a86867c82b289eff7811bad62bd3bdf97713cc111048322ba162be82249c2c7d7ce78317daa2287da6aef1ffcd07fc744139fe791876a04c762fb3b690b1f3ee6724053129b0186265d25ddd60c340ec342d54216ccbdff20782d9f609e66bbe5406c05ae45999b14d9a8b7c01b2eb2e56c07347870685680e2bcc191e565b8fb1bac43a36bd8c981469cf45e1420e3ef29372491d87c89e057e0425509ecb449ff442a93430896c4c6c18d9b418bdd3c9420a7b9577734f2389c1384c4d704d6a2a59ccd6132ffac2f1f76179c0365711fd79b8adaffc733f9d1575b2178a424d322568558699465c5cd57ca8353a67ac9d59c6bfbf18866954363b4bd17952a0affe80b9d639938eba16b12df375bfc7eb3e66f3778e7103167823238aa1a0b4910fb6c7f820d6cd5c7ab359d265123cb2b588988d72bd320acaafc39c70f6df15a430f2052f824731a217d55cc69fd325a764bb0db3a09a195f07a3696983a824aa5010bee10020c2ae898a7e53514f6b28ca59dcb3a3f369a3e053011458ce2a832b5330725dd12c86a839b2975104dbd733cba26c40f1f65bd930a8cae04332c9369c9c1298391f291695320895ee3784fbd65822ff883c1efba742f2a0a53006ee6949d27071d3cacca7e29b1f4623fefac11a331dfc921e370d17a492852a53ec03d5aefdbcf34b08d594ed32d8f361b7c8761878162639c02d85b1c1612b86c55f0dad37251adb9d7295256569455778c0444af0b2ef3244ac93250a9a2a6585f70943f94a0c0c88f4bbea4dacde61afa53d24f7f637d5604cd6a10796c053ade6b30e74cc14e1605cc2a7f21f37086f13762e86bc0f5c8e0c0858ee5e2070113570eea0fa304da0c912356c58dd72db7368220d385b8e89839f0720fb2a652c00f6cf465ab4a4fce8474cecb5e1e2460c1784b4d3e61197b275e190103c51044b73cb77506cfb445f4682aedb0e31a49a523b78f5ec1b295cfa8826add68814d793026bf0c78823c0e16de40ffd1010cdefd7f94466b4e7caf67fe18eaa4894d151aad24c9535cb0f9450e2db5ff74b11961bbc29fc03032af4585fb9f74e8e7f720dcacc4b42207721fa64d52e41a9e3ad0ef7771aa886ff8e2c2cc003c393776d8889b3e2b025a65877bcfb81cae823e4f0160c40245f964c852b6f54cf25267a0a6530c977894aee0e500cdce290ad1241b253c634394f97633e6f3919f3424dd726d7a2cd8ad82301a08e6e3e319281eee93a024326aa25eeb52546c377861cdbcd3eff5501b0a5da2db99c81b392200f2b49afa816cf1d2eaf80f8482e119decca8f98e31bf8da3dd2347a8a843429abfe8328a0ce76eaa18dd22ac85dbd8ec1d6ee2b8d2724872691cc6003080249bac80e238d1a1615ccc07b2d5853450be96de2589bd024bc572fcaaa764f9cb338ace547436b17bfd0819a64e8a76a1021964a244d1d23a2df2ce4380b055cc17891c2787c81dbdee04f29960cd148fe3cd541187f98d9dbdc4a119f7299dd79f87cfb240d2474a8f57c7d51e0bddd451d54bc67f5ceb5abd7a5ee5d4510b8fa43a6e56368227ab6b907c9b8d42e4731bb9f4584eb1f04ae528906f6046658e05fbf8ef91ffd9f62c4c6aebd48b72918e0827937387778e1a9c6d1942d585b40c610c87ced413303be8cdc2fd6927d8ff0e75f07ae85df2fab468f2474b809287ff9b99fee1e7d3367c5f4df5263ca8c9bf82cf2b0af389d8871314c37753272b4e7f8796078cc78504fac3d9b7ba3dccd1c69279f83295ea4b583667b05c6b6b76638cb7eadbb67aa6975e875bddd6d62abc5639783224fb761b3b51c0493c0bd9a0c0f1c36f2e336c1073ed322dfd030db8d638e30922f2125e6c85d0ec1191733a1cbce32a1e9e201ca701c9612fd61c02156949776376ae75c2f31ec3b0b59c85ef7fcf97144c48eac18e82db01cb9a45c29cb806954df1deced7595eec3282a9bee3bac72ff628eeaa55a7a5ad071ac9f11453e1ff84fc9dcbaf78044609473b732c135e2ae6d42caf7c03a347941cbeda85a5d1197a4d55e116e71a1b779a51b855be3adb650bf0deef74242f446d042e9e777071b7feb8cfd1687bc46ad14d51e28b15712665ba9d501e294d37913505b798fa6aa8ddbb0440b5fcceda44c046308d38118ef1551987c1fd14338d4b61d6255ec2327fbfb895b774e5d6637bad5829d6edc42c2f6cbc8e700bff751e977788dff659f4cf57c998eb44bf8d8bc90d73f556e2c11a6581f386f27c110133782a9566e","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"c60bc350b4897969a82e9a3b393a63ca"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
